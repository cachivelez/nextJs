{"version":3,"file":"4.3d4e90bb036cccd08d1b.hot-update.js","sources":["webpack:///pages/index.js"],"sourcesContent":["import 'isomorphic-fetch'\r\nimport LayoutFull from '../components/layout/LayoutFull'\r\nimport {Link} from'../routes';\r\nimport Error from './_error'\r\n\r\n// components\r\nimport Hero from '../components/hero'\r\nimport Catalogue from '../components/catalogue'\r\n\r\nexport default class extends React.Component{\t\r\n\t\r\n\tstatic async getInitialProps({ res }){\r\n\t\ttry {\r\n\r\n\t\t\tlet [reqUser, reqProducts] = await Promise.all([\r\n\t\t        fetch(`https://aerolab-challenge.now.sh/user/me?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1Yjc2NTVjNGYyYjBlNzAwNTc5ZDgzODEiLCJpYXQiOjE1MzQ0ODE4NjB9.qthyWAKLfbrB-HQ9R26z8DAn-jfHrH4xOsQSwGCaiNk`),\r\n\t\t        fetch(`https://aerolab-challenge.now.sh/products?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1Yjc2NTVjNGYyYjBlNzAwNTc5ZDgzODEiLCJpYXQiOjE1MzQ0ODE4NjB9.qthyWAKLfbrB-HQ9R26z8DAn-jfHrH4xOsQSwGCaiNk`)\r\n\t\t     ])\r\n\r\n\t\t\tif( reqUser.status >= 400 ) {\r\n\t\t        return { user: null, products: null, statusCode: req.status }\r\n\t\t    }\r\n\r\n\t\t    let user = await reqUser.json()\r\n\t\t    let products = await reqProducts.json()\r\n\r\n\t\t\treturn { user, products, statusCode: 200 }\t\r\n\t\t} catch(e){\r\n\t\t\tres.statusCode = 503\r\n\t\t\treturn { user: null, products: null, statusCode: 503 }\t\r\n\t\t}\t\t\r\n\t}\r\n\r\n\thandleClickAddCoins(arg){\r\n\t\treturn fetch('https://aerolab-challenge.now.sh/user/points', {\r\n\t        method: 'POST',\r\n\t        body: JSON.stringify({amount: 1000}),\r\n\t        headers: {\r\n\t            'Content-Type': 'application/json',\r\n\t            'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1Yjc2NTVjNGYyYjBlNzAwNTc5ZDgzODEiLCJpYXQiOjE1MzQ0ODE4NjB9.qthyWAKLfbrB-HQ9R26z8DAn-jfHrH4xOsQSwGCaiNk'\r\n\t        }\r\n\t    }).then(res => {\r\n\t    \tconsole.log('Se agregaron 1000 puntos')\r\n\t        return res;\r\n\t    }).catch(err => err);\t\r\n\t}\r\n\r\n\thandleClickRefreshCoins(){\r\n\t\t\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst { user, products, statusCode } = this.props\r\n\t\tconsole.log(user)\r\n\t\tif( statusCode !== 200 ) {\r\n\t      return <Error statusCode={ statusCode } />\r\n\t    }\r\n\r\n\t\treturn <LayoutFull user={user.name} coins={user.points} title=\"Catalogue\" eventAddCoins={this.handleClickAddCoins}>\r\n\t\t\t<Hero />\r\n\t\t\t<Catalogue user={user} products={products} eventRefreshCoins={this.handleClickRefreshCoins}/>\r\n\t\t</LayoutFull>\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// pages/index.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAFA;AAHA;AAQA;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;;;AAIA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;;;;;;;;;;;;;AAnDA;;;AAGA;AACA;;;;AADA;AAAA;AACA;AAIA;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;;AADA;;AACA;AACA;;AADA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;AArBA;AACA;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}